# Checkpoint 0 Writeup

任务 1： Lab 0 - 获取和构建启动代码

开始时间： 2023/10/2 - 12.17

实现过程：

    切换到根目录下 开辟新的文件夹build 之后 cmake .. 即可

疑问的知识点：

    cmake的使用

有必要记录的规则：

- 使用语言文档（[https://en.cppreference.com](https://en.cppreference.com/)）作为资源。
- 永远不要使用 `malloc()`或 `free()`。
- 永远不要使用 `new`或 `delete`。
- 基本上不使用原始指针（\*），只在必要时使用”智能”指针（`unique_ptr`或 `shared_ptr`）（CS144 中不需要）。
- 避免使用模板、线程、锁和虚函数（CS144 中不需要）。
- 避免使用 C 风格的字符串（`char *str`）或字符串函数（`strlen(), strcpy()`）。这些都很容易出错，使用 `std::string`代替。
- 不要使用 C 语言风格的转换（例如，`(FILE *)x`）。如果有必要，请使用 C++ `static_cast`（在 CS144 中一般不需要）。
- 倾向于通过 `const`引用传递函数参数（例如：`const Address & address`）。
- 使每个变量成为 `const`，除非它需要被改变。
- 使每个方法成为 `const`，除非它需要改变对象。
- 避免使用全局变量，给每个变量以尽可能小的范围。
- 在提交作业之前，请运行 `make`格式来规范编码风格。

完成时间： 2023/10/2 - 12.26

---

任务 2： 编写 webget

开始时间： 2023/10/2 - 12.28

实现过程：

1. 什么是 webget
   这是一个利用操作系统的 TCP 支持和流套接字抽象在互联网上获取网页的程序
2. 实现思路
   手动模拟 HTTP 请求的格式 利用给出的抽象类发送 HTTP 请求包并且截获回复包打开
   不需要提供类似浏览器的完整的可视化界面 只需要把包内容打印在终端即可
3. 任务重点
   了解 TCPSocket 和 Address 的类方法和使用方式

令人兴奋的第一次成功 ！

![image-20231002140353378](/home/ljy/.config/Typora/typora-user-images/image-20231002140353378.png)

通过所有样例

![ac_lab0check](/home/ljy/Desktop/ac_lab0.png)

完成时间： 2023/10/2 - 13.50

---

任务 3：

> 为了完成本周的实验，你将在一台计算机的内存中实现一个提供这种抽象的对象。(你可能在CS 110中做过类似的事情。) 字节在”输入”端写入，并可以从”输出”端以同样的顺序读取。字节流是无限的：写者可以结束输入，然后就不能再写了。当读者读到流的末端时，它将到达”EOF”（结束），不再有更多的字节可以被读取。
>
> 你的字节流也会受到控制：它被初始化时有一个特定的容量：它愿意在自己的内存中存储的最大字节数。字节流将限制写者可以写多长的字符串，以确保字节流不会超过其存储容量。当读取器读取字节并将其从流中耗尽时，写入器被允许写入更多。

任务内容： 在内存中实现可靠的字节流

开始时间： 2023/10/3 - 9.00

任务过程： 

1. 选择合适的数据结构对字节流进行抽象 尝试了deque 和 string 和 vector 之后 最终选择了vector （string应该也可以）实现的方法是用两个变量标记写和读的位置 设置循环队列
2. 优化： peek函数中返回类型为 string_view 且函数本身是const 的 所以我们需要O1的对连续空间用 string_view进行映射 多次尝试后解决方法是开2倍的空间 变成连续两个完全相同且连续的循环队列 这样总能找到一个起点 从这个起点开始可以O1 的映射出完整的字符流 节约了大量的拷贝成本 
   优化效果：
   样例6中 5.92s -> 0.04s
   样例10中 超时 -> 0.1s

优化前：

![image-20231003145743010](/home/ljy/.config/Typora/typora-user-images/image-20231003145743010.png)

优化后：

![image-20231003145043105](/home/ljy/.config/Typora/typora-user-images/image-20231003145043105.png)

完成时间： 2023/10/3 14.59



至此check0 的内容就完成啦

总结：

1. 首先了解了基本的项目结构
2. 练习了很多c++新特性的语法和类
3. 练习了gdb的使用
4. 应该好好学学gdb和cmake 感觉这种本地的测试方法非常有趣 有余力把这个实现过程也掌握 还有makefile 也应该学习
